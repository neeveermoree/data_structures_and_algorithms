def shell_sort(arr):
    length = len(arr)
    gap = length // 2
    while gap > 0:
        i = gap
        while i < length:
            tmp = arr[i]
            j = i
            while j > 0 and arr[j-gap] > tmp:
                arr[j] = arr[j-gap]
                j -= gap
            arr[j] = tmp
            i += 1
        gap = gap // 2
    return arr


# 1 -3 1 9 0 2 5 4 2 -1
# l = 10
# gap = 5
# .          .
# 1 -3 1 9 0 2 5 4 2 -1
#    .         .
# 1 -3 1 9 0 2 5 4 2 -1
#      .         .
# 1 -3 1 9 0 2 5 4 2 -1
#        .         .
# 1 -3 1 9 0 2 5 4 2 -1
# SWAP
#          .          .
# 1 -3 1 2 0 2 5 4 9 -1
# SWAP
# gap = 2
# .    .
# 1 -3 1 2 -1 2 5 4 9 0
#    .   .
# 1 -3 1 2 -1 2 5 4 9 0
# .    .    .
# 1 -3 1 2 -1 2 5 4 9 0
# SWAP 1
# 1 -3 -1 2 1 2 5 4 9 0
# SWAP 2
#     .   .   .
# -1 -3 1 2 1 2 5 4 9 0
#       .   .   .
# -1 -3 1 2 1 2 5 4 9 0
#         .   .   .
# -1 -3 1 2 1 2 5 4 9 0
#           .   .   .
# -1 -3 1 2 1 2 5 4 9 0
#             .   .   .
# -1 -3 1 2 1 2 5 4 9 0
# SWAP 1
# -1 -3 1 2 1 2 5 0 9 4
# SWAP 2
# -1 -3 1 2 1 0 5 2 9 4
# SWAP 3
# gap = 1
#  .  .
# -1 -3 1 0 1 2 5 2 9 4
# SWAP
#  .  . .
# -3 -1 1 0 1 2 5 2 9 4
#     . . .
# -3 -1 1 0 1 2 5 2 9 4
# SWAP
#       . . .
# -3 -1 0 1 1 2 5 2 9 4
#         . . .
# -3 -1 0 1 1 2 5 2 9 4
#           . . .
# -3 -1 0 1 1 2 5 2 9 4
#             . . .
# -3 -1 0 1 1 2 5 2 9 4
# SWAP
#               . . .
# -3 -1 0 1 1 2 2 5 9 4
#                 . . .
# -3 -1 0 1 1 2 2 5 9 4
# SWAP 1
# -3 -1 0 1 1 2 2 5 4 9
# SWAP 2
# -3 -1 0 1 1 2 2 4 5 9

a = [1, -3, 1, 9, 0, 2, 5, 4, 2, -1]
print(shell_sort(a))
